/* Floatbox v3.54.1 */
Floatbox.prototype.start=function(g){var k=fb.lastChild;if(!(g=fb$(g))){return}k.clearTimeout("start");var j=false;fb.preload("",false);if(!g.setAttribute){j=g;if(j.html&&!j.href){j.href="#"}if(!j.tagged){return k.start(k.tagOneAnchor(j,true))}}else{g.blur();var e=k.anchors.length;while(e--){if(k.anchors[e].anchor===g){j=k.anchors[e];break}}if(!j){return k.start(k.tagOneAnchor(g,true))}}if(!j.href&&j.options.showThis!==false){return}var h=!!k.fbBox;if(h){if(!j.options.sameBox){return new Floatbox().start(j)}if(k.currentItem){if(k.currentIndex!==k.indexToShow&&k.exec(k.currentItem,"beforeItemEnd")===false){return}if(k.currentItem.type==="inline"&&k.fbContent.innerHTML){k.moveInnerHTML(k.fbContent,k.currentItem.sourceEl)}}k.setOptions(j.options)}if(k.exec(k.itemToShow,"beforeItemStart")===false){return}j.level=fb.children.length+(fb.lastChild.fbBox&&!j.options.sameBox?1:0);k.getCurrentSet(j);if(!k.itemCount){return}if(k.itemCount===1&&k.fbNavControls){k.fbNavControls.style.display="none"}self.focus();if(!h){k.clickOptions=j.options;k.clicked=j;k.getAllOptions();if(k.exec(k.itemToShow,"beforeBoxStart")===false){return}if(k.randomOrder){k.randomous()}if(k.cycleDivs.length){k.cycleStop()}k.getModule(k.color+".css");k.buildDOM();k.addEventHandlers();k.initState()}k.itemsShown=0;if(k.cornerRadius){k.fbCorners.style.display=""}if(k.resizeDuration){k.fbBoxLoader.style.display=""}var d=function(){if(h){k.exec(k.currentItem,"onItemEnd");k.exec(k.currentItem,"afterItemEnd")}else{k.exec(k.itemToShow,"afterBoxStart")}k.measureContent()};if(k.fbBox.style.visibility||h){d()}else{var l=Math.max(k.maxInitialSize-2*(k.cornerRadius||k.realBorder),k.minInitialSize),f=Math.round(l/2),b={id:"fbBox",left:k.pos.fbBox.left-f,top:k.pos.fbBox.top-f,width:l,height:l};if(k.splitResize){var c=function(){k.setSize(b,d)}}else{k.setTimeout("slowLoad",function(){k.fbBoxLoader.style.display="";k.setSize(b)},k.slowLoadDelay);var c=d}k.setOpacity(k.fbOverlay,k.overlayOpacity,k.overlayFadeDuration,c)}};Floatbox.prototype.getCurrentSet=function(b){var e=this,g=e.currentSet;g.length=e.itemCount=e.indexToShow=0;g.justImages=true;g.hasImage=g.hasMedia=false;for(var d=0;d<e.anchors.length;d++){var c=e.anchors[d];if(c.level===b.level&&(b===c||(b.group&&b.group===c.group))&&c.options.showThis!==false){c.seen=false;g.push(c);if(c.type==="img"){g.hasImage=true}else{g.justImages=false}if(c.type.indexOf("media")===0){g.hasMedia=true}}if(!c.anchor){e.anchors.splice(d,1);d--}}e.itemCount=g.length;if(e.itemCount>1){var f=b.options.showThis===false&&b.href,d=e.itemCount;while(d--){var c=g[d];if(c===b||(f&&c.href===f.substring(f.length-c.href.length))){e.indexToShow=d;break}}}e.itemToShow=g[e.indexToShow]};Floatbox.prototype.randomous=function(){var c=this,b=c.itemCount;while(--b){var a=Math.floor(Math.random()*(b+1)),d=c.currentSet[b];c.currentSet[b]=c.currentSet[a];c.currentSet[a]=d;if(b===c.indexToShow){c.indexToShow=a}else{if(a===c.indexToShow){c.indexToShow=b}}}if(c.isSlideshow){c.indexToShow=0}c.itemToShow=c.currentSet[c.indexToShow]};Floatbox.prototype.getAllOptions=function(){var l=this,j=l.currentSet;l.getGlobalOptions();l.setOptions(l.clickOptions);var c=l.clickOptions.theme||l.pageOptions.theme;if(c&&c!=="auto"){l.colorImages=l.colorHTML=l.colorVideo=c}if(l.endTask==="cont"){l.endTask="loop"}if(l.navType==="upper"){l.navType="overlay"}if(l.navType==="lower"){l.navType="button"}if((c=l.clickOptions.showUpperNav||l.pageOptions.showUpperNav)){l.showNavOverlay=c}if((typeof(c=l.clickOptions.upperNavWidth)==="number")||(typeof(c=l.pageOptions.upperNavWidth)==="number")){l.navOverlayWidth=c}if((typeof(c=l.clickOptions.upperNavPos)==="number")||(typeof(c=l.pageOptions.upperNavPos)==="number")){l.navOverlayPos=c}if((c=l.clickOptions.controlPos||l.pageOptions.controlPos)){l.controlsPos=c}if((c=l.clickOptions.infoPos||l.pageOptions.infoPos)){l.captionPos=l.infoLinkPos=l.printLinkPos=l.itemNumberPos=c}if(l.clickOptions.indexLinksPanel){l.indexLinksPos=l.clickOptions.indexLinksPanel==="control"?l.controlsPos:l.captionPos}else{if(l.pageOptions.indexLinksPanel){l.indexLinksPos=l.pageOptions.indexLinksPanel==="control"?l.controlsPos:l.captionPos}}if((typeof(c=l.clickOptions.dropShadow)==="boolean")||(typeof(c=l.pageOptions.dropShadow)==="boolean")){l.shadowType=c?"drop":"none"}if((typeof(c=l.clickOptions.enableDrag)==="boolean")||(typeof(c=l.pageOptions.enableDrag)==="boolean")){l.enableDragMove=c}if((typeof(c=l.clickOptions.autoSizeImages)==="boolean")||(typeof(c=l.pageOptions.autoSizeImages)==="boolean")){l.autoFitImages=c}if((typeof(c=l.clickOptions.autoSizeOther)==="boolean")||(typeof(c=l.pageOptions.autoSizeOther)==="boolean")){l.autoFitOther=c}if((typeof(c=l.clickOptions.hideFlash)==="boolean")||(typeof(c=l.pageOptions.hideFlash)==="boolean")){l.hideObjects=c}if((typeof(c=l.clickOptions.showCaption)==="boolean")||(typeof(c=l.pageOptions.showCaption)==="boolean")){l.titleAsCaption=c}l.fbParent=l.parent;j.hasCaption=!!l.pageOptions.caption;j.hasCaption2=!!l.pageOptions.caption2;j.hasPrintLink=!!l.pageOptions.showPrint;j.hasNewWindowLink=!!l.pageOptions.showNewWindow;j.hasInfoLink=false;var d=j.length;while(d--){var h=j[d];if(h.options.caption||(l.titleAsCaption&&h.title)){j.hasCaption=true}if(h.options.caption2){j.hasCaption2=true}if(h.options.showPrint){j.hasPrintLink=true}if(h.options.showNewWindow){j.hasNewWindowLink=true}if(h.options.info){j.hasInfoLink=true}}l.color=l.clickOptions.color||l.pageOptions.color||"";if(!/^(black|white|blue|yellow|red|custom)$/.test(l.color)){l.color=l.itemToShow.type==="img"?l.colorImages:(l.itemToShow.type.indexOf("media")===0?l.colorVideo:l.colorHTML)}if(!/^(overlay|button|both|none)$/.test(l.navType)){l.navType="button"}if(!/^(auto|wh|hw)$/.test(l.splitResize)){l.splitResize=false}if(l.itemCount>1){l.isSlideshow=l.doSlideshow;var e=/overlay|both/i.test(l.navType),f=/button|both/i.test(l.navType);l.navOverlay=l.currentSet.justImages&&e;l.navButton=f||(!l.currentSet.justImages&&e);j.showItemNumber=l.showItemNumber;j.numIndexLinks=l.numIndexLinks}else{l.isSlideshow=l.navOverlay=l.navButton=j.showItemNumber=j.numIndexLinks=l.randomOrder=false}if(!l.isSlideshow){l.showPlayPause=false}if(l.outsideClickCloses&&!l.overlayOpacity){l.overlayOpacity=0.01}l.isPaused=l.startPaused;if(!l.doAnimations){l.resizeDuration=l.imageFadeDuration=l.overlayFadeDuration=0}if(!l.resizeDuration){l.zoomImageStart=l.startAtClick=l.liveImageChange=l.liveImageResize=false}l.activePanels={};l.centeredPanels={};l.activeWidgets={};var b=[];if(j.hasCaption){b.push("caption")}if(j.hasCaption2){b.push("caption2")}if(j.hasInfoLink){b.push("infoLink")}if(j.hasPrintLink){b.push("printLink")}if(j.hasNewWindowLink){b.push("newWindowLink")}if(j.showItemNumber){b.push("itemNumber")}if(j.numIndexLinks){b.push("indexLinks")}var d=b.length;while(d--){var g=l[b[d]+"Pos"];if(g.charAt(1)!=="c"){l.activePanels[g]=true}}if(l.navButton||l.showClose||l.showPlayPause||(j.numIndexLinks&&indexLinksPos===controlsPos)){l.controlsTop=l.controlsPos.charAt(0)==="t";l.controlsLeft=l.controlsPos.charAt(1)==="l";l.controlsCorner=l.controlsPos;l.activePanels[l.controlsCorner]=true}else{l.controlsTop=l.controlsLeft=l.controlsPos=l.controlsCorner=l.undefined}var d=b.length;while(d--){var k=b[d];l[k+"Top"]=l[k+"Pos"].charAt(0)==="t";l[k+"Center"]=l[k+"Pos"].charAt(1)==="c";l[k+"Left"]=l[k+"Pos"].charAt(1)==="l";if(l[k+"Center"]){if(l[k+"Top"]){l[k+"Left"]=!(l.activePanels.tl&&!l.activePanels.tr)}else{l[k+"Left"]=!(l.activePanels.bl&&!l.activePanels.br)}}}if(l.captionTop===l.caption2Top&&l.captionLeft===l.caption2Left){if(l.caption2Top===l.controlsTop&&l.caption2Left===!l.controlsLeft){l.caption2Top=!l.caption2Top}else{l.caption2Left=!l.caption2Left}}var d=b.length;while(d--){var k=b[d];if(k!=="indexLinks"&&k!=="newWindowLink"&&l[k+"Top"]===l.controlsTop&&l[k+"Left"]===l.controlsLeft){l[k+"Left"]=!l.controlsLeft}l[k+"Corner"]=(l[k+"Top"]?"t":"b")+(l[k+"Left"]?"l":"r");l.activePanels[l[k+"Corner"]]=true;if(l[k+"Center"]){l.centeredPanels[l[k+"Corner"]]=true}}if(j.hasInfoLink){l.activeWidgets[l.infoLinkCorner]=true}if(j.hasPrintLink){l.activeWidgets[l.printLinkCorner]=true}if(j.showItemNumber){l.activeWidgets[l.itemNumberCorner]=true}if(!/^(drop|halo|none)$/.test(l.shadowType)){l.shadowType="drop"}if(l.ieOld){l.shadowType=l.roundCorners="none"}if(l.shadowType==="none"){l.shadowSize=0}else{if(!/^(8|12|16|24)$/.test(l.shadowSize+"")){l.shadowSize=8}l.shadowSize=+l.shadowSize}if(l.cornerRadius===0){l.roundCorners="none"}if(!/^(all|top|none)$/.test(l.roundCorners)){l.roundCorners=l.enableDragResize?"top":"all"}l.roundBorder=l.roundBorder?1:0;if(!/^(8|12|20)$/.test(l.cornerRadius+"")){l.cornerRadius=12}l.cornerRadius=+l.cornerRadius;if(l.roundCorners==="none"){l.cornerRadius=l.roundBorder=0}l.bottomCorners=l.roundCorners==="all";if(l.cornerRadius){l.apparentBorder=l.roundBorder;l.realBorder=0;l.realPadding=Math.max(l.padding-(l.cornerRadius-l.roundBorder),0);l.apparentPadding=l.realPadding+l.cornerRadius-l.roundBorder}else{l.realBorder=l.apparentBorder=l.outerBorder;l.realPadding=l.apparentPadding=l.padding}if(l.currentSet.hasMedia){l.enableDragResize=false}if(l.enableDragResize){if(l.draggerLocation!=="content"){l.draggerLocation="frame"}}else{l.draggerLocation=false}if(l.imageClickCloses||l.opera||(l.mac&&!l.webkit)){l.resizeTool="topleft"}else{l.resizeTool=l.resizeTool.toLowerCase();if(!/topleft|cursor|both/.test(l.resizeTool)){l.resizeTool="cursor"}}if(!(l.apparentPadding||l.realBorder)){l.zoomPopBorder=0}};Floatbox.prototype.buildDOM=function(){var a=this,b=a.currentSet;a.fbOverlay=a.newNode("div","fbOverlay",a.bod);a.fbBox=a.newNode("div","fbBox");if(a.zoomImageStart){a.fbZoomDiv=a.newNode("div","fbZoomDiv",a.bod);a.fbZoomImg=a.newNode("img","fbZoomImg",a.fbZoomDiv);a.fbZoomLoader=a.newNode("div","fbZoomLoader",a.fbZoomDiv)}if(a.shadowSize){a.fbShadows=a.newNode("div","fbShadows",a.fbBox);a.fbShadowTop=a.newNode("div","fbShadowTop",a.fbShadows);a.fbShadowRight=a.newNode("div","fbShadowRight",a.fbShadows);a.fbShadowCorner=a.newNode("div","fbShadowCorner",a.fbShadows);a.fbShadowBottom=a.newNode("div","fbShadowBottom",a.fbShadows);a.fbShadowLeft=a.newNode("div","fbShadowLeft",a.fbShadows)}if(a.cornerRadius){a.fbCorners=a.newNode("div","fbCorners",a.fbBox);a.fbCornerTop=a.newNode("div","fbCornerTop",a.fbCorners);a.fbCornerRight=a.newNode("div","fbCornerRight",a.fbCorners);a.fbCornerBottom=a.newNode("div","fbCornerBottom",a.fbCorners);a.fbCornerLeft=a.newNode("div","fbCornerLeft",a.fbCorners)}a.fbBoxLoader=a.newNode("div","fbBoxLoader",a.fbBox);a.fbCanvas=a.newNode("div","fbCanvas",a.fbBox);a.fbMainDiv=a.newNode("div","fbMainDiv",a.fbCanvas);a.fbMainLoader=a.newNode("div","fbMainLoader",a.fbMainDiv);if(a.navOverlay){a.fbLeftNav=a.newNode("a","fbLeftNav",a.fbMainDiv);a.fbRightNav=a.newNode("a","fbRightNav",a.fbMainDiv);a.fbOverlayPrev=a.newNode("a","fbOverlayPrev",a.fbMainDiv,a.strings.hintPrev);a.fbOverlayNext=a.newNode("a","fbOverlayNext",a.fbMainDiv,a.strings.hintNext)}if(a.resizeImages||a.resizeOther){a.fbResizer=a.newNode("a","fbResizer",a.fbMainDiv,a.strings.hintResize)}if(a.activePanels.tl){a.fbtlPanel=a.newNode("div","fbtlPanel",a.fbCanvas)}if(a.activePanels.tr){a.fbtrPanel=a.newNode("div","fbtrPanel",a.fbCanvas)}if(a.activePanels.bl){a.fbblPanel=a.newNode("div","fbblPanel",a.fbCanvas)}if(a.activePanels.br){a.fbbrPanel=a.newNode("div","fbbrPanel",a.fbCanvas)}if(b.hasCaption){a.fbCaptionDiv=a.newNode("div","fbCaptionDiv",a["fb"+a.captionCorner+"Panel"]);a.fbCaption=a.newNode("span","fbCaption",a.fbCaptionDiv)}if(b.hasCaption2){a.fbCaption2Div=a.newNode("div","fbCaption2Div",a["fb"+a.caption2Corner+"Panel"]);a.fbCaption2=a.newNode("span","fbCaption2",a.fbCaption2Div)}if(a.activeWidgets.tl){a.fbtlWidgetDiv=a.newNode("div","fbtlWidgetDiv",a.fbtlPanel)}if(a.activeWidgets.tr){a.fbtrWidgetDiv=a.newNode("div","fbtrWidgetDiv",a.fbtrPanel)}if(a.activeWidgets.bl){a.fbblWidgetDiv=a.newNode("div","fbblWidgetDiv",a.fbblPanel)}if(a.activeWidgets.br){a.fbbrWidgetDiv=a.newNode("div","fbbrWidgetDiv",a.fbbrPanel)}if(b.hasInfoLink&&(a.infoLinkLeft||a.infoLinkCenter)){a.fbInfoLink=a.newNode("span","fbInfoLink",a["fb"+a.infoLinkCorner+"WidgetDiv"])}if(b.hasPrintLink&&(a.printLinkLeft||a.printLinkCenter)){a.fbPrintLink=a.newNode("span","fbPrintLink",a["fb"+a.printLinkCorner+"WidgetDiv"])}if(b.showItemNumber){a.fbItemNumber=a.newNode("span","fbItemNumber",a["fb"+a.itemNumberCorner+"WidgetDiv"])}if(b.hasPrintLink&&!(a.printLinkLeft||a.printLinkCenter)){a.fbPrintLink=a.newNode("span","fbPrintLink",a["fb"+a.printLinkCorner+"WidgetDiv"])}if(b.hasInfoLink&&!(a.infoLinkLeft||a.infoLinkCenter)){a.fbInfoLink=a.newNode("span","fbInfoLink",a["fb"+a.infoLinkCorner+"WidgetDiv"])}if(a.controlsCorner){a.fbControls=a.newNode("div","fbControls",a["fb"+a.controlsCorner+"Panel"]);if(a.navButton){a.fbNavControls=a.newNode("div","fbNavControls",a.fbControls);a.fbPrev=a.newNode("a","fbPrev",a.fbNavControls,a.strings.hintPrev);a.fbNext=a.newNode("a","fbNext",a.fbNavControls,a.strings.hintNext)}if(a.showClose||a.showPlayPause){a.fbSubControls=a.newNode("div","fbSubControls",a.fbControls);if(a.showPlayPause){a.fbPlayPause=a.newNode("div","fbPlayPause",a.fbSubControls);a.fbPlay=a.newNode("a","fbPlay",a.fbPlayPause,a.strings.hintPlay);a.fbPause=a.newNode("a","fbPause",a.fbPlayPause,a.strings.hintPause)}if(a.showClose){a.fbClose=a.newNode("a","fbClose",a.fbSubControls,a.strings.hintClose)}}}if(b.numIndexLinks){a.fbIndexLinks=a.newNode("span","fbIndexLinks",a["fb"+a.indexLinksCorner+"Panel"])}if(b.hasNewWindowLink){a.fbNewWindowLink=a.newNode("div","fbNewWindowLink",a["fb"+a.newWindowLinkCorner+"Panel"])}if(a.enableDragResize){a.fbDragger=a.newNode("div","fbDragger",a.fbCanvas)}a.bod.appendChild(a.fbBox)};Floatbox.prototype.newNode=function(b,f,a,e){var c=this;if(c[f]&&c[f].parentNode){c[f].parentNode.removeChild(c[f])}var d=document.createElement(b);d.id=f;d.className="fb fb_"+c.color;if(b==="a"){if(!c.operaOld){d.href=""}if(c.ieOld){d.hideFocus="true"}d.style.outline="none"}else{if(b==="iframe"){d.scrolling=c.itemScroll;d.frameBorder="0";d.align="middle";d.src=c.graphicsFolder+"loader_iframe_"+c.color+".html"}}if(c.isChild&&c.parent[f]){e=c.parent[f].title}if(e&&c.showHints!=="never"){d.title=e}if(c.zIndex[f]){d.style.zIndex=c.zIndex.base+c.zIndex[f]}d.style.display="none";if(a){a.appendChild(d)}c.nodes.push(d);return d};Floatbox.prototype.addEventHandlers=function(){var i=this;if(!i.rtl&&(i.graphicsType.toLowerCase()==="english"||(i.graphicsType==="auto"&&i.browserLanguage==="en"))){i.offPos="top left";i.onPos="bottom left"}else{i.offPos="top right";i.onPos="bottom right";i.controlSpacing=0}if(i.showHints==="once"){var j=function(k){if(i[k].title){i.setTimeout(k,function(){i[k].title="";if(i.parent[k]){i.parent[k].title=""}var l="";if(i.navOverlay){if(/fbOverlay(Prev|Next)/.test(k)){l=k.replace("Overlay","")}else{if(/fb(Prev|Next)/.test(k)){l=k.replace("fb","fbOverlay")}}if(i[l]){i[l].title=""}if(i.parent[l]){i.parent[l].title=""}}},i.showHintsTime)}}}else{var j=function(){}}if(i.showPlayPause){i.fbPlay.onclick=function(k){i.pause(false);return i.stopEvent(k)};i.fbPause.onclick=function(k){i.pause(true);return i.stopEvent(k)}}if(i.showClose){i.fbClose.onclick=function(k){i.end();return i.stopEvent(k)}}if(i.outsideClickCloses){i.fbOverlay.onclick=function(k){i.end();return i.stopEvent(k)};if(i.shadowSize){i.fbShadows.onclick=i.fbOverlay.onclick}}if(i.navOverlay||i.navButton){var h=function(k){i.showPrevious();return i.stopEvent(k)};var b=function(k){i.showNext();return i.stopEvent(k)}}if(i.navButton){i.fbPrev.onclick=i.rtl?b:h;i.fbNext.onclick=i.rtl?h:b}if(i.navOverlay){var f=i.fbLeftNav.style,g=i.fbRightNav.style,a=i.fbOverlayPrev.style,c=i.fbOverlayNext.style;i.fbLeftNav.onclick=i.fbOverlayPrev.onclick=i.rtl?b:h;i.fbRightNav.onclick=i.fbOverlayNext.onclick=i.rtl?h:b;i.fbLeftNav.onmouseover=i.fbLeftNav.onmousemove=i.fbOverlayPrev.onmousemove=function(){if(!i.timeouts.fade_fbCanvas){a.visibility=""}if(i.fbPrev){i.fbPrev.style.backgroundPosition=i.onPos}return true};i.fbRightNav.onmouseover=i.fbRightNav.onmousemove=i.fbOverlayNext.onmousemove=function(){if(!i.timeouts.fade_fbCanvas){c.visibility=""}if(i.fbNext){i.fbNext.style.backgroundPosition=i.onPos}return true};i.fbOverlayPrev.onmouseover=i.fbOverlayNext.onmouseover=function(){this.onmousemove();j(this.id);return true};i.fbLeftNav.onmouseout=function(){a.visibility="hidden";if(i.fbPrev){i.fbPrev.style.backgroundPosition=i.offPos}};i.fbRightNav.onmouseout=function(){c.visibility="hidden";if(i.fbNext){i.fbNext.style.backgroundPosition=i.offPos}};i.fbOverlayPrev.onmouseout=i.fbOverlayNext.onmouseout=function(){this.style.visibility="hidden";i.clearTimeout(this.id)};i.fbLeftNav.onmousedown=i.fbRightNav.onmousedown=function(k){k=k||window.event;if(k.button===2){f.visibility=g.visibility="hidden";i.setTimeout("hideNavOverlay",function(){f.visibility=g.visibility=""},600)}}}var e=function(){this.style.backgroundPosition=i.onPos;j(this.id);return true},d=function(){this.style.backgroundPosition=i.offPos;i.clearTimeout(this.id)};if(i.showClose){i.fbClose.onmouseover=e;i.fbClose.onmouseout=d}if(i.showPlayPause){i.fbPlay.onmouseover=i.fbPause.onmouseover=e;i.fbPlay.onmouseout=i.fbPause.onmouseout=d}if(i.navButton){i.fbPrev.onmouseover=i.fbNext.onmouseover=e;i.fbPrev.onmouseout=i.fbNext.onmouseout=d}if(i.fbResizer){i.fbResizer.onmouseover=function(){j(this.id);return true};i.fbResizer.onmouseout=function(){i.clearTimeout(this.id)}}if(fb.enableKeyboardNav&&!fb.keydownHandlerSet&&fb.keydownHandler){fb.addEvent(fb.doc,"keydown",fb.keydownHandler);fb.keydownHandlerSet=true}if(i.opera&&i.isSlideShow&&!fb.keypressHandlerSet){fb.priorOnkeypress=fb.doc.onkeypress||null;fb.keypressHandler=function(k){return fb.stopEvent(k)};fb.addEvent(fb.doc,"keypress",fb.keypressHandler);fb.keypressHandlerSet=true}if(fb.centerOnResize&&!fb.resizeHandlerSet&&fb.resizeHandler){fb.addEvent(window,"resize",fb.resizeHandler);fb.resizeHandlerSet=true}if((i.enableDragMove||i.enableDragResize)&&!i.fbBox.onmousedown&&i.getMousedownHandler){i.fbBox.onmousedown=i.getMousedownHandler()}};Floatbox.prototype.initState=function(){var r=this,n=r.fbBox.style,i=r.fbMainDiv.style,d=r.fbCanvas.style,z=r.itemToShow;r.dragMoveDx=r.dragMoveDy=r.dragResizeDx=r.dragResizeDy=0;r.currentItem=r.currentIndex=r.previousItem=r.endCalled=false;var g=z.type==="img"&&z.thumb&&r.zoomImageStart&&r.zoomIn,o=r.getAnchorPos(g?z:r.clicked,g);if(g&&!o.width){o=r.getAnchorPos(r.clicked,false)}if(o.width){var k=r.fbZoomDiv.style;k.borderWidth=r.zoomPopBorder+"px";k.left=(o.left-=r.zoomPopBorder)+"px";k.top=(o.top-=r.zoomPopBorder)+"px";k.width=(r.fbZoomImg.width=o.width)+"px";k.height=(r.fbZoomImg.height=o.height)+"px";r.pos.fbZoomDiv=o;r.fbZoomImg.src=o.src;n.visibility="hidden";r.pos.fbBox={};if(z.popup){z.popupLocked=true}r.setTimeout("slowLoad",function(){if(r.fbOverlay.style.display){r.setOpacity(r.fbOverlay,r.overlayOpacity,r.overlayFadeDuration)}k.display=r.fbZoomImg.style.display=r.fbZoomLoader.style.display=""},r.slowLoadDelay)}else{o.borderWidth=r.realBorder;o.left-=r.realBorder;o.top-=r.realBorder;for(var B in o){if(o.hasOwnProperty(B)){n[B]=o[B]+"px"}}r.pos.fbBox=o}d.visibility="hidden";n.position="absolute";n.top="-9999px";n.textAlign=r.rtl?"right":"left";i.width=i.height="0";i.borderWidth=r.innerBorder+"px";r.pos.fbMainDiv={width:0,height:0,top:0};n.display=d.display="";if(r.cornerRadius){var j=r.fbCornerTop.style,m=r.fbCornerRight.style,f=r.fbCornerBottom.style,A=r.fbCornerLeft.style;j.left=j.top=m.top=A.left=-r.cornerRadius+"px";j.paddingRight=j.paddingBottom=m.paddingRight=f.paddingBottom=m.paddingBottom=f.paddingRight=A.paddingRight=A.paddingBottom=r.cornerRadius+"px";var s="url("+r.graphicsFolder+"corner",x="_"+r.color+"_r"+r.cornerRadius+"_b"+r.roundBorder+".png)",u="_"+r.color+"_r0_b"+r.roundBorder+".png)";j.backgroundImage=s+"Top"+x;m.backgroundImage=s+"Right"+x;f.backgroundImage=s+"Bottom"+(!r.bottomCorners||r.draggerLocation==="frame"?u:x);A.backgroundImage=s+"Left"+(!r.bottomCorners?u:x);j.display=m.display=f.display=A.display=""}if(r.shadowSize){var b=r.fbShadows.style,w=r.fbShadowTop.style,v=r.fbShadowRight.style,q=r.fbShadowCorner.style,p=r.fbShadowBottom.style,a=r.fbShadowLeft.style,y=r.realBorder||r.cornerRadius,h=y+r.realBorder;var e=(r.realBorder||r.cornerRadius),c=y+r.shadowSize;b.top=b.left=-(c)+"px";w.paddingRight=p.paddingRight=v.paddingBottom=a.paddingBottom=(e+r.realBorder)+"px";v.paddingRight=p.paddingBottom=q.paddingRight=q.paddingBottom=2*c+"px";if(r.cornerRadius&&(!r.bottomCorners||r.draggerLocation==="frame")){v.paddingBottom=p.paddingRight=2*r.cornerRadius+"px";if(!r.bottomCorners){a.paddingBottom=2*r.cornerRadius+"px"}}var s="url("+r.graphicsFolder+"shadow",x="_s"+r.shadowSize+"_r"+r.cornerRadius+".png)",u="_s"+r.shadowSize+"_r0.png)";w.backgroundImage=s+"Top"+x;q.backgroundImage=s+"Corner"+(!r.bottomCorners||r.draggerLocation==="frame"?u:x);a.backgroundImage=s+"Left"+x;var l=r.shadowType==="drop"?"_drop":"";v.backgroundImage=s+"Right"+l+x;p.backgroundImage=s+"Bottom"+l+(!r.bottomCorners?u:x);v.display=q.display=p.display="";if(r.shadowType==="halo"){w.display=a.display=""}}r.initPanels();if(r.navOverlay){if(r.showNavOverlay==="never"||(r.showNavOverlay==="once"&&fb.navOverlayShown)){fb.showNavOverlay=false}else{r.fbOverlayPrev.style.backgroundPosition=r.fbOverlayNext.style.backgroundPosition=r.onPos;r.setOpacity(r.fbOverlayPrev,r.controlOpacity);r.setOpacity(r.fbOverlayNext,r.controlOpacity);r.fbOverlayPrev.style.display=r.fbOverlayNext.style.display="none"}}if(r.fbResizer){r.setOpacity(r.fbResizer,r.controlOpacity);r.fbResizer.style.display="none"}if(r.fbDragger){r.setOpacity(r.fbDragger,r.controlOpacity);r.fbDragger.style.display="none"}r.startingScroll=r.getScroll();if(r.hideObjects){r.hideElements("object");r.hideElements("embed")}if(r.hideJava){r.hideElements("applet")}if(r.ieOld){r.hideElements("select");r.fbOverlay.style.position="absolute";if(r.stretchOverlay){r.stretchOverlay();if(!r.ieOldInitialized){window.attachEvent("onresize",r.stretchOverlay);window.attachEvent("onscroll",r.stretchOverlay);r.ieOldInitialized=true}}}};Floatbox.prototype.hideElements=function(h,j){var k=this;if(!j){k.hideElements(h,self)}else{try{var b=j.document.getElementsByTagName(h),c=b.length;while(c--){if(b[c].style.visibility!=="hidden"){k.hiddenEls.push(b[c]);b[c].style.visibility="hidden"}}}catch(g){}try{var d=j.document.getElementsByTagName("iframe"),c=d.length;while(c--){var f=k.getIframeWindow(d[c]),a=d[c].src;if(f&&a&&!k.isXSite(a)){k.hideElements(h,f)}}}catch(g){}}};Floatbox.prototype.getAnchorPos=function(l,g){var q=this,d=false,j=q.getDisplaySize(),m=q.getScroll();if(l.anchor){if(g){var k=q.getLeftTop(l.thumb),h=parseInt(q.getStyle(l.thumb,"paddingLeft")||"0",10),n=parseInt(q.getStyle(l.thumb,"paddingRight")||"0",10),i=parseInt(q.getStyle(l.thumb,"paddingTop")||"0",10),f=parseInt(q.getStyle(l.thumb,"paddingBottom")||"0",10),b=l.thumb.width-((q.ie&&!q.ieNew)||q.opera?h+n:0),o=l.thumb.height-((q.ie&&!q.ieNew)||q.opera?i+f:0),e=(l.thumb.offsetWidth-h-n-b)/2;if(k.left>0&&k.top>0){k.left+=e+h;k.top+=e+i;k.width=b;k.height=o;k.src=l.thumb.src;d=k}}if(!d&&q.startAtClick&&l.anchor.offsetWidth){var c=(!l.popup&&l.thumb)||l.anchor,k=q.getLeftTop(c);if(k.left>0&&k.top>0){k.left+=Math.round(c.offsetWidth/2);k.top+=Math.round(c.offsetHeight/2);k.width=k.height=0;d=k}}}if(d){var k={left:(d.left+d.width/2),top:(d.top+d.height/2)},p={left:m.left,top:m.top,right:(m.left+j.width),bottom:(m.top+j.height)};if(k.left>p.left&&k.top>p.top&&k.left<p.right&&k.top<p.bottom){return d}}return{left:Math.round(j.width/2)+m.left,top:Math.round(j.height/3)+m.top,width:0,height:0}};Floatbox.prototype.initPanels=function(){var g=this;var o=g.fbInfoLink&&g.fbInfoLink.style,l=g.fbPrintLink&&g.fbPrintLink.style,c=g.fbItemNumber&&g.fbItemNumber.style;for(var e in g.activePanels){if(g.activePanels.hasOwnProperty(e)){var f=g["fb"+e+"Panel"].style,p=g.infoLinkGap+"px";if(g.centeredPanels[e]){var a=" posCenter",p=Math.round(g.infoLinkGap/2)+"px";f.textAlign="center";if(g.fbInfoLink&&g.infoLinkCorner===e){o.paddingLeft=o.paddingRight=p}if(g.fbPrintLink&&g.printLinkCorner===e){l.paddingLeft=l.paddingRight=p}if(g.fbItemNumber&&g.itemNumberCorner===e){c.paddingLeft=c.paddingRight=p}}else{if(e.charAt(1)==="l"){var a=" posLeft";f.textAlign="left";if(g.fbInfoLink&&g.infoLinkCorner===e){o.paddingRight=p}if(g.fbPrintLink&&g.printLinkCorner===e){l.paddingRight=p}}else{var a=" posRight";f.textAlign="right";if(g.fbInfoLink&&g.infoLinkCorner===e){o.paddingLeft=p}if(g.fbPrintLink&&g.printLinkCorner===e){l.paddingLeft=p}}}g["fb"+e+"Panel"].className+=a;if(g["fb"+e+"WidgetDiv"]){g["fb"+e+"WidgetDiv"].className+=a}f.width="500px";if(g.fbControls&&g.controlsCorner===e){var h=g.fbControls.style,j=g.fbSubControls&&g.fbSubControls.style;if(!g.controlsLeft){h.right="0"}if(!g.ieOld){g.fbControls.className+=a}if(g.fbSubControls){g.fbSubControls.className+=a}f.display=h.display="";if(g.navButton){var k=g.fbPrev.style,m=g.fbNext.style,b=g.fbNavControls.style;k.backgroundPosition=m.backgroundPosition=g.offPos;b["padding"+(g.controlsLeft?"Left":"Right")]=g.controlSpacing+"px";g.fbNavControls.className+=a;b.display=k.display=m.display=""}var n=0;if(g.showClose){var i=g.fbClose.style;i.backgroundPosition=g.offPos;g.fbClose.className+=a;j.display=i.display="";n=g.fbClose.offsetWidth}if(g.showPlayPause){var q=g.fbPlay.style,d=g.fbPause.style,s=g.fbPlayPause.style;q.backgroundPosition=d.backgroundPosition=g.offPos;s["padding"+(g.controlsLeft?"Left":"Right")]=g.controlSpacing+"px";g.fbPlayPause.className+=a;j.display=s.display=q.display=d.display="";q.top=g.isPaused?"":"-9999px";d.top=g.isPaused?"-9999px":"";n+=g.fbPlayPause.offsetWidth}if(g.fbSubControls){j.width=n+"px"}if(g.fbNavControls){n+=g.fbNavControls.offsetWidth}g.controlsWidth=n;h.width=n+"px"}if(g.fbIndexLinks&&g.indexLinksCorner===e){var r=g.fbIndexLinks.style;g.fbIndexLinks.className+=a;f.display="";if(g.showIndexThumbs){f.overflow="visible"}if(g.indexLinksCorner===g.controlsCorner){r["padding"+(g.indexLinksLeft?"Left":"Right")]="2px"}r.display=""}if(g.fbNewWindowLink&&g.newWindowLinkCorner===e){g.fbNewWindowLink.className+=a}}}if(g.activePanels.br&&g.enableDragResize&&g.draggerLocation==="frame"&&Math.max(g.apparentPadding,g.panelPadding)<g.draggerSize){g.fbbrPanel.style.paddingRight=g.draggerSize+"px"}};Floatbox.prototype.updatePanels=function(){var m=this,n=m.currentSet,g=m.indexToShow,x=m.itemToShow,r;for(var f in m.activePanels){if(m.activePanels.hasOwnProperty(f)&&f!==m.controlsCorner){m["fb"+f+"Panel"].style.display="none";if(m["fb"+f+"WidgetDiv"]){m["fb"+f+"WidgetDiv"].style.display="none"}}}if(m.fbCaption){if((r=x.options.caption||m.pageOptions.caption||(m.titleAsCaption&&x.title))){if(r==="href"){r=m.encodeHTML(x.href)}else{r=m.decodeHTML(r).replace(/&/g,"&amp;")}m.setInnerHTML(m.fbCaption,r);m["fb"+m.captionCorner+"Panel"].style.display=m.fbCaptionDiv.style.display=m.fbCaption.style.display=""}else{m.setInnerHTML(m.fbCaption,"");m.fbCaptionDiv.style.display=m.fbCaption.style.display="none"}}if(m.fbCaption2){if((r=x.options.caption2||m.pageOptions.caption2)){if(r==="href"){r=m.encodeHTML(x.href)}else{r=m.decodeHTML(r).replace(/&/g,"&amp;")}m.setInnerHTML(m.fbCaption2,r);m["fb"+m.caption2Corner+"Panel"].style.display=m.fbCaption2Div.style.display=m.fbCaption2.style.display=""}else{m.setInnerHTML(m.fbCaption2,"");m.fbCaption2Div.style.display=m.fbCaption2.style.display="none"}}if(m.fbInfoLink){if((r=x.options.info)){r=m.encodeHTML(m.decodeHTML(r));var c=x.options.infoOptions||m.pageOptions.infoOptions||"";if(c){c=m.encodeHTML(m.decodeHTML(c))}r='<a href="'+r+'" class="fb '+m.magicClass+'" rev="'+c+'">'+(x.options.infoText||m.pageOptions.infoText||m.strings.infoText)+"</a>";m.setInnerHTML(m.fbInfoLink,r);m["fb"+m.infoLinkCorner+"Panel"].style.display=m["fb"+m.infoLinkCorner+"WidgetDiv"].style.display=m.fbInfoLink.style.display=""}else{m.setInnerHTML(m.fbInfoLink,"");m.fbInfoLink.style.display="none"}}if(m.fbPrintLink){if(x.options.showPrint||(x.options.showPrint!==false&&m.pageOptions.showPrint)){if(!(x.type==="iframe"&&m.isXSite(x.href))){r='<a class="fb" href="'+m.encodeHTML(x.href)+'" rel="nofloatbox" onclick="fb.printContents(\''+m.printCSS+"'); return fb.stopEvent(window.event);\">"+(x.options.printText||m.pageOptions.printText||m.strings.printText)+"</a>";m.setInnerHTML(m.fbPrintLink,r);m["fb"+m.printLinkCorner+"Panel"].style.display=m["fb"+m.printLinkCorner+"WidgetDiv"].style.display=m.fbPrintLink.style.display=""}}else{m.setInnerHTML(m.fbPrintLink,"");m.fbPrintLink.style.display="none"}}if(m.fbItemNumber){r=m.currentSet.justImages?m.strings.imgCount:(m.currentSet.hasImage?m.strings.mixedCount:m.strings.nonImgCount);r=r.replace("%1",g+1);r=r.replace("%2",m.itemCount);m.setInnerHTML(m.fbItemNumber,r);m["fb"+m.itemNumberCorner+"Panel"].style.display=m["fb"+m.itemNumberCorner+"WidgetDiv"].style.display=m.fbItemNumber.style.display=""}if(m.fbIndexLinks){var b=m.currentSet.numIndexLinks;r="";var s=m.itemCount-1,y,j;if(b===-1){y=0;j=s}else{var o=Math.floor(b/2)-1;y=g-o;j=g+o;if(y<=0){j+=Math.min(1-y,o)}if(g===0){j++}if(j-s>=0){y-=Math.min(1+j-s,o)}if(g===s){y--}}var f=m.indexLinksTop?"down":"up",u=0;while(u<m.itemCount){if(u!==0&&u<y){r+="... ";u=y}else{if(u!==s&&u>j){r+="... ";u=s}else{if(u!==g){var z=m.currentSet[u];r+='<a class="fbPop'+f+'" rel="nofloatbox" href="'+z.href+'" onclick="fb.showItem('+u+'); return fb.stopEvent(window.event);">'+ ++u;try{if(m.showIndexThumbs&&z.thumb){var p="";if(m.maxIndexThumbSize){var A=z.thumb.width,d=z.thumb.height,h=A/d,l=Math.min(m.maxIndexThumbSize-A,0),k=Math.min(m.maxIndexThumbSize-d,0);if(l||k){if(k*h<=l){l=Math.round(k*h)}else{k=Math.round(l/h)}p=' width="'+(A+l)+'" height="'+(d+k)+'"'}}r+='<img src="'+z.thumb.src+'"'+p+" />"}}catch(w){}r+="</a> "}else{r+=++u+" "}}}}m.setInnerHTML(m.fbIndexLinks,r);m["fb"+m.indexLinksCorner+"Panel"].style.display=m.fbIndexLinks.style.display=""}if(m.fbNewWindowLink){if((x.options.showNewWindow||(x.options.showNewWindow!==false&&m.pageOptions.showNewWindow))&&x.type!=="inline"){var q=(x.options.closeOnNewWindow||(x.options.closeOnNewWindow!==false&&m.closeOnNewWindow))?' onclick="fb.end();"':"",v=!m.showNewWindowIcon?' style="padding-left:0; background-image:none;"':"";r='<a class="fb" href="'+m.encodeHTML(x.href)+'" target="_blank"'+q+v+' rel="nofloatbox">'+m.strings.newWindow+"</a>";m.setInnerHTML(m.fbNewWindowLink,r);m["fb"+m.newWindowLinkCorner+"Panel"].style.display=m.fbNewWindowLink.style.display=""}else{m.setInnerHTML(m.fbNewWindowLink,"");m.fbNewWindowLink.style.display="none"}}for(var f in m.activePanels){if(m.activePanels.hasOwnProperty(f)){m.tagAnchors(m["fb"+f+"Panel"])}}};Floatbox.prototype.measureContent=function(){var b=this,c=b.itemToShow;if(c.type==="img"){if(!b.timeouts.slowLoad){b.setTimeout("slowLoad",function(){b.fbMainLoader.style.display=""},b.slowLoadDelay)}var a=b.preloads[c.href];if(!a){return b.preload(c.href,b.undefined,function(){b.measureContent()})}c.nativeWidth=c.options.width||a.width;c.nativeHeight=c.options.height||a.height;b.quickChange=(b.currentItem&&b.currentItem.type==="img"&&(!b.resizeDuration||(!b.imageFadeDuration&&b.currentItem.nativeWidth===c.nativeWidth&&b.currentItem.nativeHeight===c.nativeHeight)))}else{c.nativeWidth=c.options.width||(b.currentItem&&b.currentItem.nativeWidth)||b.defaultWidth;c.nativeHeight=c.options.height||(b.currentItem&&b.currentItem.nativeHeight)||b.defaultHeight;b.quickChange=false}if(!b.endCalled){b.collapse(function(){b.fetchContent();b.updatePanels();b.setTimeout("calcSize",function(){b.calcSize()},10)})}};Floatbox.prototype.fetchContent=function(phase){var t=this,item=t.itemToShow;if(!phase){if(t.fbContent&&!(item.type==="img"&&t.fbContent.nodeName==="IMG")){t.fbMainDiv.removeChild(t.fbContent);delete t.fbContent;return t.setTimeout("fetch",function(){t.fetchContent(1)},10)}}if(t.ieOld){t.fbMainDiv.style.backgroundColor=item.type==="img"?"#000":""}t.itemScroll=item.options.scrolling||item.options.scroll||t.pageOptions.scrolling||t.pageOptions.scroll||"auto";if(!/auto|yes|no/i.test(t.itemScroll)){t.itemScroll="auto"}t.fbMainDiv.style.overflow="hidden";if(/img|iframe/.test(item.type)){if(!t.fbContent){t.fbContent=t.newNode(item.type,"fbContent",t.fbMainDiv)}if(item.type==="img"){if(!t.quickChange){t.fbContent.src=t.preloads[item.href].src}if(t.imageClickCloses){t.fbContent.onclick=function(){t.end()}}}}else{t.fbContent=t.newNode("div","fbContent",t.fbMainDiv);t.fbMainDiv.style.overflow=t.itemScroll==="yes"?"scroll":(t.itemScroll==="no"?"hidden":"auto");function setContent(content){var scripts=[],rex=/<script[^>]*>([\s\S]+?)<\/script>/gi,match;rex.lastIndex=0;while((match=rex.exec(content))){content=content.replace(match[0],"");scripts.push(match[1])}t.setInnerHTML(t.fbContent,content);if(scripts.length){setTimeout(function(){scripts.reverse();while(scripts.length){try{eval(scripts.pop())}catch(e){}}},40)}t.tagAnchors(t.fbContent)}if(item.type==="direct"){setContent(item.html)}else{if(item.type==="inline"){setContent(item.sourceEl.innerHTML);t.setInnerHTML(item.sourceEl,"")}else{if(item.type==="ajax"){fb.ajax({url:item.href,cache:t.cacheAjaxContent,callback:function(xhr){if(xhr.responseText){setContent(xhr.responseText)}else{setContent('<p style="color:#000; background:#fff; margin:1em; padding:1em;">Unable to fetch content from '+item.href+"</p>")}}})}}}}t.fbContent.style.border="0"};Floatbox.prototype.calcSize=function(fit,pass){var t=this,mainW,mainH,boxW,boxH,boxX,boxY,item=t.itemToShow,posBox=t.pos.fbBox,box=t.fbBox.style;if(!t.fbBox){return}if(fit===t.undefined){fit=item.type==="img"?t.autoFitImages:t.autoFitOther}if(!pass){fb.displaySize=t.getDisplaySize();if(t.fbCaption&&t.fbCaption.innerHTML){t.fbCaptionDiv.display=""}if(t.fbCaption2&&t.fbCaption2.innerHTML){t.fbCaption2Div.display=""}for(var pos in t.activePanels){if(t.activePanels.hasOwnProperty(pos)){t["fb"+pos+"Panel"].style.width="400px"}}if(t.fbIndexLinks){t.fbIndexLinks.style.width=""}if(t.fbNewWindowLink){t.fbNewWindowLink.style.width=""}}var panelH={tl:0,tr:0,bl:0,br:0};t.upperSpace=t.lowerSpace=0;for(var pos in t.activePanels){if(t.activePanels.hasOwnProperty(pos)){panelH[pos]=t["fb"+pos+"Panel"].offsetHeight;if(pos.charAt(0)==="t"){t.upperSpace=Math.max(t.upperSpace,panelH[pos])}else{t.lowerSpace=Math.max(t.lowerSpace,panelH[pos])}}}if(t.upperSpace){t.upperSpace+=2*t.panelPadding}if(t.lowerSpace){t.lowerSpace+=2*t.panelPadding}t.upperSpace=Math.max(t.upperSpace,t.apparentPadding);t.lowerSpace=Math.max(t.lowerSpace,t.apparentPadding);var rightGap=Math.max(t.shadowSize,t.autoFitSpace),leftGap=t.shadowType==="halo"?rightGap:t.autoFitSpace,bottomGap=rightGap,topGap=leftGap,pad=2*(t.apparentBorder+t.innerBorder)+leftGap+rightGap,maxW=fb.displaySize.width-2*t.apparentPadding-pad,maxH=fb.displaySize.height-t.upperSpace-t.lowerSpace-pad,sizeRatio=eval("("+(item.options.sizeRatio||"0")+")"),isPercentW=false,isPercentH=false;if(sizeRatio){mainW=maxW;mainH=mainW/sizeRatio;if(mainH>maxH){mainH=maxH;mainW=mainH*sizeRatio}}else{mainW=item.nativeWidth+"";isPercentW=mainW.substring(mainW.length-1)==="%";if(mainW==="max"){mainW=maxW}else{if(isPercentW){mainW=Math.floor(maxW*parseInt(mainW,10)/100)}else{mainW=+mainW}}mainH=item.nativeHeight+"";isPercentH=mainH.substring(mainH.length-1)==="%";if(mainH==="max"){mainH=maxH}else{if(isPercentH){mainH=Math.floor(maxH*parseInt(mainH,10)/100)}else{mainH=+mainH}}}if(t.enableDragResize&&!(t.dragResizing||t.stickyDragResize)){t.dragResizeDx=t.dragResizeDy=0}var minW=typeof item.options.minContentWidth==="number"?item.options.minContentWidth:(t.minContentWidth||0),minH=typeof item.options.minContentHeight==="number"?item.options.minContentHeight:(t.minContentHeight||0),dx,dy;minW=Math.min(minW,mainW);minH=Math.min(minH,mainH);if(t.dragResizing){mainW+=t.dragResizeDx+t.autoFitDx;if(mainW<minW){dx=(t.dragResizeDx+(minW-mainW))/t.dragResizeDx;mainW=minW;t.dragResizeDx*=dx;if(t.proportional){t.dragResizeDy*=dx}}mainH+=t.dragResizeDy+t.autoFitDy;if(mainH<minH){dy=(t.dragResizeDy+(minH-mainH))/t.dragResizeDy;mainH=minH;t.dragResizeDy*=dy;if(t.proportional){mainW-=t.dragResizeDx*(1-dy);t.dragResizeDx*=dy}}}else{var ratio=mainW/mainH,total=t.dragResizeDx+t.dragResizeDy;if(total){dy=total/(ratio+1);dx=total-dy;mainW+=dx;mainH+=dy}dx=Math.max(minW-mainW,0);dy=Math.max(minH-mainH,0);if(dx||dy){if(!(isPercentW||isPercentH)){if(dy*ratio>=dx){dx=dy*ratio}else{dy=dx/ratio}}mainW+=dx;mainH+=dy}t.autoFitDx=t.autoFitDy=0;if(fit&&!sizeRatio){dx=Math.min(maxW-mainW,0);dy=Math.min(maxH-mainH,0);if(dx||dy){if(!(isPercentW||isPercentH)){if(dy*ratio<=dx){dx=dy*ratio}else{dy=dx/ratio}}mainW+=(t.autoFitDx=dx);mainH+=(t.autoFitDy=dy)}}}mainW=Math.round(mainW);mainH=Math.round(mainH);boxW=mainW+2*(t.innerBorder+t.realPadding);boxH=mainH+2*t.innerBorder+t.upperSpace+t.lowerSpace;if(t.cornerRadius){boxH-=2*(t.cornerRadius-t.roundBorder)}if(t.centerNav&&t.navButton){t.fbControls.style.width=Math.round(mainW/2+t.innerBorder+t[t.controlsLeft?"fbNext":"fbPrev"].offsetWidth)+"px"}var fullW=boxW-2*Math.max(t.realPadding,t.panelPadding),halfW=Math.floor((fullW-t.panelGap)/2),done={},usedW=function(pos){var rtn=0,panel=t["fb"+pos+"Panel"];if(panel){panel.style.width=fullW+"px";if(t.fbControls&&t.controlsCorner===pos){rtn=t.fbControls.offsetWidth}if(t.activeWidgets[pos]){rtn=t["fb"+pos+"WidgetDiv"].offsetWidth}if(t.fbCaption&&t.captionCorner===pos){rtn=Math.max(rtn,t.fbCaption.offsetWidth)}if(t.fbCaption2&&t.caption2Corner===pos){rtn=Math.max(rtn,t.fbCaption2.offsetWidth)}if(t.fbIndexLinks&&t.indexLinksCorner===pos){rtn=Math.max(rtn,t.fbIndexLinks.offsetWidth)}if(t.fbNewWindowLink&&t.newWindowLinkCorner===pos){rtn=Math.max(rtn,t.fbNewWindowLink.offsetWidth)}}return rtn},setW=function(thisPos){if(done[thisPos]){return}var thatPos=thisPos.charAt(0)+(thisPos.charAt(1)==="l"?"r":"l"),thisPanel=t["fb"+thisPos+"Panel"],thatPanel=t["fb"+thatPos+"Panel"],thisW=usedW(thisPos),thatW=(thatPanel&&usedW(thatPos))||0;if(thatW>halfW){if(thisW>halfW||t.centeredPanels[thisPos]){thatW=halfW}else{thatW=Math.min(thatW,fullW-thisW-t.panelGap);if(thatW<0){thatW=0}}}if(thatPos===t.controlsCorner&&thatW<t.controlsWidth){thatW=t.controlsWidth}thisW=fullW-thatW-(thatW?t.panelGap:0);if(thisW<0){thisW=0}if(thisPos===t.controlsCorner&&thisW<t.controlsWidth){thisW=t.controlsWidth;if(thatPanel){thatW=Math.min(thatW,fullW-thisW-t.panelGap);if(thatW<0){thatW=0}}}thisPanel.style.width=thisW+"px";if(thatPanel){thatPanel.style.width=thatW+"px"}done[thisPos]=true;done[thatPos]=true};if(t.fbIndexLinks){t.fbIndexLinks.style.width=""}if(t.fbNewWindowLink){t.fbNewWindowLink.style.width=""}for(var pos in t.centeredPanels){if(t.centeredPanels.hasOwnProperty(pos)){setW(pos)}}for(var pos in t.activePanels){if(t.activePanels.hasOwnProperty(pos)){setW(pos)}}var changed=false;for(var pos in t.activePanels){if(t.activePanels.hasOwnProperty(pos)){if(t["fb"+pos+"Panel"].offsetHeight!==panelH[pos]){changed=true;break}}}if(t.fbIndexLinks){t.fbIndexLinks.style.width="100%"}if(t.fbNewWindowLink){t.fbNewWindowLink.style.width="100%"}if(t.fbCaption){if(!t.fbCaptionDiv.style.display){if(t["fb"+t.captionCorner+"Panel"].offsetWidth<t.minCaptionWidth){t.fbCaptionDiv.style.display="none";t.captionHiddenAt=boxW;changed=true}}else{if(t.captionHiddenAt&&t.captionHiddenAt<boxW){t.fbCaptionDiv.style.display="";t.captionHiddenAt=t.undefined;changed=true}}}if(t.fbCaption2){if(!t.fbCaption2Div.style.display){if(t["fb"+t.caption2Corner+"Panel"].offsetWidth<t.minCaptionWidth){t.fbCaption2Div.style.display="none";t.caption2HiddenAt=boxW;changed=true}}else{if(t.caption2HiddenAt&&t.caption2HiddenAt<boxW){t.fbCaption2Div.style.display="";t.caption2HiddenAt=t.undefined;changed=true}}}if(changed&&pass!==3){return t.calcSize(fit,(pass||0)+1)}t.widthOversize=mainW-maxW;t.heightOversize=mainH-maxH;if(t.dragResizing){boxX=posBox.left;boxY=posBox.top}else{if(t.ieOld){var ieLeft=t.getStyle(t.fbBox,"left");box.left="";if(t.currentItem){box[t.rtl?"right":"left"]=box.top="-9999px"}t.stretchOverlay()}else{var boxPosition=box.position;t.setPosition(t.fbBox,"fixed")}var scroll=t.getScroll();if(t.ieOld){if(t.currentItem){box.left=ieLeft;box.right="";box.top=posBox.top+"px"}}else{t.setPosition(t.fbBox,boxPosition)}if(typeof t.boxLeft==="number"){boxX=t.boxLeft}else{var freeSpace=fb.displaySize.width-boxW-2*(t.cornerRadius+t.realBorder)-t.shadowSize;if(t.shadowType==="halo"){freeSpace-=t.shadowSize}boxX=freeSpace/2;if(typeof t.boxLeft==="string"&&t.boxLeft.substring(t.boxLeft.length-1)==="%"){boxX+=parseInt(t.boxLeft,10)/100*boxX}}if(t.stickyDragMove){boxX+=t.dragResizeDx/2+t.dragMoveDx}var rightSide=boxX+2*(t.apparentBorder+t.apparentPadding+t.innerBorder)+mainW+rightGap,offset=rightSide-fb.displaySize.width;if(offset>0){boxX-=offset}if(boxX<leftGap){boxX=typeof t.boxLeft==="number"?t.boxLeft:leftGap}boxX=Math.round(boxX)+t.cornerRadius+scroll.left;var factor=3;if(typeof t.boxTop==="number"){boxY=t.boxTop}else{var freeSpace=fb.displaySize.height-boxH-2*(t.cornerRadius+t.realBorder)-t.shadowSize;if(t.shadowType==="halo"){freeSpace-=t.shadowSize}var ratio=freeSpace/fb.displaySize.height;if(ratio<=0.15){factor=2}else{if(ratio<0.3){factor=1+ratio/0.15}}boxY=freeSpace/factor;if(typeof t.boxTop==="string"&&t.boxTop.substring(t.boxTop.length-1)==="%"){boxY+=parseInt(t.boxTop,10)/100*boxY}}if(t.stickyDragMove){boxY+=t.dragResizeDy/factor+t.dragMoveDy}var bottomSide=boxY+2*(t.apparentBorder+t.innerBorder)+t.upperSpace+t.lowerSpace+mainH+bottomGap,offset=bottomSide-fb.displaySize.height;if(offset>0){boxY-=offset}if(boxY<topGap){boxY=typeof t.boxTop==="number"?t.boxTop:topGap}boxY=Math.round(boxY)+t.cornerRadius+scroll.top;if(t.ieOld&&box.visibility){boxY+=(7+t.roundBorder)}if(t.isChild&&!(t.dragMoveDx||t.dragMoveDy)){var rex=/max|%/i,pos=t.parent.pos.fbBox,childX=rex.test(item.nativeWidth)?99999:(pos.left+boxX)/2,childY=rex.test(item.nativeHeight)?99999:(pos.top+boxY)/2;if(scroll.left<childX&&scroll.top<childY){boxX=Math.min(boxX,childX);boxY=Math.min(boxY,childY)}}}t.leftRatio=t.topRatio=false;if(t.dragResizing){var oncomplete=function(){t.restore()}}else{var oncomplete=function(){if(t.quickChange){t.fbContent.src=t.preloads[t.itemToShow.href].src}if(t.fbBox){box.visibility?t.zoomIn():t.showContent()}}}var timer=t.quickChange||t.dragResizing?0:10,split=!(t.liveResize||t.quickChange||t.dragResizing)&&t.splitResize;if(split==="auto"){split=boxW-posBox.width<=boxH-posBox.height?"wh":"hw"}t.setTimeout("setSize",function(){t.setSize(split,!timer,{id:"fbBox",left:boxX,top:boxY,width:boxW,height:boxH,borderWidth:t.realBorder},{id:"fbMainDiv",width:mainW,height:mainH,left:t.realPadding,top:t.upperSpace-(t.cornerRadius-t.roundBorder)},function(){t.setTimeout("showContent",oncomplete,timer)})},timer)};Floatbox.prototype.setPosition=function(d,b){if(d.style.position===b){return}var c=this,e=c.pos[d.id],a=c.getScroll();if(b==="fixed"){a.left=-a.left;a.top=-a.top}if(e){e.left+=a.left;e.top+=a.top}d.style.left=(d.offsetLeft+a.left)+"px";d.style.top=(d.offsetTop+a.top)+"px";d.style.position=b};Floatbox.prototype.collapse=function(g,b){var c=this;if(!b){c.clearTimeout("slowLoad");c.fbMainLoader.style.display="none";c.setPosition(c.fbBox,"absolute");c.liveResize=(c.liveImageResize&&c.resizeDuration&&c.itemToShow===c.currentItem&&c.itemToShow.type==="img"&&!c.endCalled);if(c.fbResizer){c.fbResizer.onclick=null;c.fbResizer.style.display="none"}if(c.fbContent&&/cursor|both/.test(c.resizeTool)){c.fbContent.onclick=null;c.fbContent.style.cursor=""}if(c.navOverlay){c.fbLeftNav.style.display=c.fbRightNav.style.display=c.fbOverlayPrev.style.display=c.fbOverlayNext.style.display="none"}if(this.ie&&c.fbDragger){c.fbDragger.style.display="none"}var d=(c.currentItem&&c.currentItem.type==="img"&&!c.fbCanvas.style.visibility?c.imageFadeDuration:0);if(!(c.liveResize||(c.quickChange&&!d))){return c.setOpacity(c.fbCanvas,0,d,function(){c.collapse(g,1)})}}if(c.fbDragger){c.fbDragger.style.display="none"}var e=c.rtl?"right":"left";for(var f in c.activePanels){if(c.activePanels.hasOwnProperty(f)){var a=c["fb"+f+"Panel"].style;a.left=a.right=a.bottom="";a[e]=a.top="-9999px"}}if(g){g()}};Floatbox.prototype.restore=function(m,k){var o=this,i=o.currentItem.type;if(!k){if(o.shadowSize){o.fbShadows.style.display=""}for(var j in o.activePanels){if(o.activePanels.hasOwnProperty(j)){var b=o["fb"+j+"Panel"],c=b.style;c.left=c.right=c.top=c.bottom="";if(j.charAt(0)==="t"){c.top=Math.round((o.upperSpace-b.offsetHeight)/2-(o.cornerRadius-o.roundBorder))+"px"}else{c.bottom=Math.round((o.lowerSpace-b.offsetHeight)/2-(o.cornerRadius-o.roundBorder))+"px"}c[j.charAt(1)==="l"?"left":"right"]=Math.max(o.realPadding,o.panelPadding)+"px"}}if(o.fbDragger){var d=o.fbDragger.style;if(o.draggerLocation==="frame"){d.right=(o.roundBorder-o.cornerRadius)+"px";d.bottom=-(o.cornerRadius-o.roundBorder)+"px"}else{d.right=(o.apparentPadding+o.roundBorder+o.innerBorder-o.cornerRadius)+"px";d.bottom=(o.lowerSpace+o.innerBorder-(o.cornerRadius-o.roundBorder))+"px"}if(!this.ie){d.display=""}}o.clearTimeout("mainLoader");o.fbBoxLoader.style.display="none";o.fbMainDiv.style.display="";if(o.fbContent){o.fbContent.style.display=""}var g=(i==="img"&&!o.fbCanvas.style.visibility)?o.imageFadeDuration:0;if(!(o.liveResize||(o.quickChange&&!g))){return o.setOpacity(o.fbCanvas,100,g,function(){o.restore(m,1)})}}if(this.ie&&o.fbDragger){o.fbDragger.style.display=""}if(i==="img"?o.resizeImages:o.resizeOther){var f=0;if(Math.min(o.autoFitDx+o.dragResizeDx,o.autoFitDy+o.dragResizeDy)<-30){f=1}else{if(Math.max(o.widthOversize,o.heightOversize,o.dragResizeDx,o.dragResizeDy)>30){f=-1}}if(f){var n=function(p){if(o.isSlideshow&&o.pauseOnResize&&!o.isPaused){o.pause(true)}o.dragResizeDx=o.dragResizeDy=o.autoFitDx=o.autoFitDy=0;o.collapse(function(){o.calcSize(f===-1)});return o.stopEvent(p)};if(o.fbResizer){o.fbResizer.onclick=n}if(i==="img"&&/cursor|both/.test(o.resizeTool)){o.fbContent.style.cursor="url("+(f===-1?o.resizeDownCursor:o.resizeUpCursor)+"), default";o.fbContent.onclick=n}if(o.fbResizer&&(i!=="img"||/topleft|both/.test(o.resizeTool))){o.fbResizer.style.backgroundPosition=(f===-1?"bottom":"top");o.fbResizer.style.display=""}}}if(o.navOverlay){var h=o.fbLeftNav.style,l=o.fbRightNav.style,a=o.fbOverlayPrev.style,e=o.fbOverlayNext.style;h.width=l.width=Math.max(o.navOverlayWidth/100*o.pos.fbMainDiv.width,o.fbOverlayPrev.offsetWidth)+"px";h.display=l.display="";if(fb.showNavOverlay){a.visibility=e.visibility="hidden";a.display=e.display="";a.top=e.top=((o.pos.fbMainDiv.height-o.fbOverlayPrev.offsetHeight)*o.navOverlayPos/100)+"px"}}if(m){m()}};Floatbox.prototype.showContent=function(g){var i=this;if(!g){var c=i.indexToShow,h=i.itemToShow,e=h.type,b=i.pos.fbBox,f=i.getDisplaySize();if(!i.reCalced){if((f.width!==fb.displaySize.width&&i.widthOversize>-40)||(f.height!==fb.displaySize.height&&i.heightOversize>-40)){i.reCalced=true;return i.calcSize(i.autoFitDx||i.autoFitDy)}}i.reCalced=false;self.focus();if(i.ieOld){i.stretchOverlay()}if((i.ffOld&&/silverlight|quicktime/.test(e))||(i.seaMonkey&&(e.indexOf("media")===0))||((i.disableScroll||(i.ffOld&&e==="iframe"))&&!i.ieOld&&b.width<=f.width&&b.height<=f.height)){i.setPosition(i.fbBox,"fixed")}if(e==="iframe"){var a=i.fbContent.src;if(a.substring(a.length-h.href.length)!==h.href){i.fbContent.src=h.href}}else{if(e.indexOf("media")===0){i.setInnerHTML(i.fbContent,i.mediaHTML(h.href,e,i.pos.fbMainDiv.width,i.pos.fbMainDiv.height,h.options.minFlashVersion||i.pageOptions.minFlashVersion))}}if(i.itemCount===1){i.prevIndex=i.nextIndex=i.prevHref=i.nextHref=false}else{i.prevIndex=c?c-1:i.itemCount-1;i.nextIndex=c<i.itemCount-1?c+1:0;i.prevHref=i.enableWrap||c!==0?i.currentSet[i.prevIndex].href:"";i.nextHref=i.enableWrap||c!==i.itemCount-1?i.currentSet[i.nextIndex].href:""}if(i.navButton){if(i.prevHref){if(!i.operaOld){i.fbPrev.href=i.prevHref}i.fbPrev.title=i.fbPrev.title||i.fbPrev.titleOff;i.fbPrev.titleOff=""}else{i.fbPrev.removeAttribute("href");i.fbPrev.titleOff=i.fbPrev.title;i.fbPrev.title=""}if(i.nextHref){if(!i.operaOld){i.fbNext.href=i.nextHref}i.fbNext.title=i.fbNext.title||i.fbNext.titleOff;i.fbNext.titleOff=""}else{i.fbNext.removeAttribute("href");i.fbNext.titleOff=i.fbNext.title;i.fbNext.title=""}i.fbPrev.style.backgroundImage=i.prevHref?"":"url("+i.graphicsFolder+"prev_"+i.color+"_off.gif)";i.fbNext.style.backgroundImage=i.nextHref?"":"url("+i.graphicsFolder+"next_"+i.color+"_off.gif)"}if(i.navOverlay){if(!i.operaOld){i.fbLeftNav.href=i.fbOverlayPrev.href=i.prevHref;i.fbRightNav.href=i.fbOverlayNext.href=i.nextHref}i.fbLeftNav.style.visibility=i.prevHref?"":"hidden";i.fbRightNav.style.visibility=i.nextHref?"":"hidden";fb.navOverlayShown=true}if(i.currentItem!==i.itemToShow){i.previousItem=i.currentItem;i.currentItem=i.itemToShow;i.currentIndex=i.indexToShow}i.fbCanvas.style.visibility="";return i.restore(function(){i.setTimeout("showContent",function(){i.showContent(1)},10)})}var h=i.currentItem;if(!h.seen){h.seen=true;i.itemsShown++}if(i.isSlideshow&&!i.isPaused){i.setTimeout("slideshow",function(){if(i.endTask==="loop"||i.itemsShown<i.itemCount){i.showItem(i.nextIndex)}else{if(i.endTask==="exit"){i.end()}else{i.pause(true);var j=i.itemCount;while(j--){i.currentSet[j].seen=false}i.itemsShown=0}}},i.slideInterval*1000)}i.exec(h,"preloadCycleItem");setTimeout(function(){i.exec(h,"onItemStart");i.exec(h,"afterItemStart")},10);var d;if(!i.isChild&&!i.nagShown&&(d=i.reg())){if(i.isSlideshow){i.pause(true);i.clearTimeout("slideshow")}i.nagShown=true}i.setTimeout("preload",function(){fb.preload((i.nextIndex!==false&&i.currentSet[i.nextIndex].type==="img"&&i.nextHref)||(i.prevIndex!==false&&i.currentSet[i.prevIndex].type==="img"&&i.prevHref)||"",true)},100)};Floatbox.prototype.showPrevious=function(c){var b=this;if(b.currentIndex===b.indexToShow){var a=(b.currentIndex-(c||1))%b.itemCount;if(a<0){a+=b.itemCount}if(b.enableWrap||a<b.currentIndex){b.showItem(a);if(b.isSlideshow&&b.pauseOnPrev&&!b.isPaused){b.pause(true)}}}};Floatbox.prototype.showNext=function(c){var b=this;if(b.currentIndex===b.indexToShow){var a=(b.currentIndex+(c||1))%b.itemCount;if(b.enableWrap||a>b.currentIndex){b.showItem(a);if(b.isSlideshow&&b.pauseOnNext&&!b.isPaused){b.pause(true)}}}};Floatbox.prototype.showItem=function(a){var b=fb.lastChild;if(!b.currentItem||a===b.currentIndex||a>=b.itemCount){return}if(b.exec(b.currentItem,"beforeItemEnd")===false){return}b.indexToShow=a;b.itemToShow=b.currentSet[a];if(b.exec(b.itemToShow,"beforeItemStart")===false){b.indexToShow=b.currentIndex;b.itemToShow=b.currentItem;return}b.clearTimeout("slideshow");b.clearTimeout("resize");fb.preload("",false);if(b.currentItem.type==="inline"&&b.fbContent.innerHTML){b.moveInnerHTML(b.fbContent,b.currentItem.sourceEl)}if(fb.showNavOverlay=="once"&&fb.navOverlayShown){fb.showNavOverlay=false}if(window.scrollTo&&!(b.rtl&&b.ieOld)){window.scrollTo(b.startingScroll.left,b.startingScroll.top)}b.exec(b.currentItem,"onItemEnd");b.exec(b.currentItem,"afterItemEnd");b.measureContent()};Floatbox.prototype.end=function(k){var m=fb.lastChild,l=m.currentItem;if(!m.fbBox){return}if(!m.fbBox.style.visibility){if(m.exec(l,"beforeItemEnd")===false||m.exec(l,"beforeBoxEnd")===false){return}m.exec(l,"setCycleItem")}m.endCalled=true;m.endAll=m.endAll||k;m.clearTimeout("*");m.fbMainLoader.style.display="none";parent.focus();m.fbOverlay.onclick=null;if(m.ieOld){window.detachEvent("onresize",m.stretchOverlay);window.detachEvent("onscroll",m.stretchOverlay)}if(!m.isChild){if(fb.keydownHandlerSet){fb.removeEvent(fb.doc,"keydown",fb.keydownHandler);fb.keydownHandlerSet=false}if(fb.keypressHandlerSet){fb.removeEvent(fb.doc,"keypress",fb.keypressHandler);fb.keypressHandlerSet=false}if(fb.resizeHandlerSet){fb.removeEvent(window,"resize",fb.resizeHandler);fb.resizeHandlerSet=false}}else{if(m.endAll){m.imageFadeDuration=m.overlayFadeDuration=m.resizeDuration=0}}if(m.fbBox.style.visibility){if(!m.currentItem&&m.fbZoomDiv){m.fbZoomDiv.style.display="none"}}else{if(l.type==="inline"&&m.fbContent.innerHTML){m.moveInnerHTML(m.fbContent,l.sourceEl)}if(m.resizeDuration){if(l.type==="img"&&l.thumb&&m.zoomImageStart&&m.zoomOut){if(l.popup){l.anchor.onmouseover(true)}var b=m.getAnchorPos(l,true);l.popupLocked=false;if(l.popup){l.anchor.onmouseout()}if(b.width){m.fbZoomDiv.style.borderWidth=m.zoomPopBorder+"px";b.left-=m.zoomPopBorder;b.top-=m.zoomPopBorder;m.pos.thumb=b;return m.zoomOut()}}var b=m.getAnchorPos(m.clicked,false),g=m.splitResize,j={id:"fbBox",left:(b.left+b.width/2),top:(b.top+b.height/2),width:0,height:0};if(g==="wh"){g="hw"}else{if(g==="hw"){g="wh"}else{if(g==="auto"){g=m.pos.fbBox.width<=m.pos.fbBox.height?"hw":"wh"}}}var f=function(){setTimeout(function(){m.fbBox.style.top="-9999px";m.fbBox.style.visibility="hidden";m.end()},10)};if(g){var n=Math.max(m.maxInitialSize-2*(m.cornerRadius||m.realBorder),m.minInitialSize),c={id:"fbBox",left:Math.round(b.left-n/2),top:Math.round(b.top-n/2),width:n,height:n},h=function(){m.setSize(g,c,function(){m.setSize(j,f)})}}else{var h=function(){m.setSize(j,f)}}var d=function(){m.fbCanvas.style.display="none";if(m.resizeDuration){m.fbBoxLoader.style.display=""}if(m.shadowSize){m.fbShadows.style.display="none"}if(l&&l.type&&l.type.indexOf("media")===0){setTimeout(function(){if(m.fbContent){var p=m.fbContent.getElementsByTagName("object"),o=p.length;while(o--){var q=p[o];if(q&&q.parentNode){q.parentNode.removeChild(q)}}}},20)}h()};return m.collapse(d)}}m.fbBox.style.display="none";var a=fb.children.length+1,e=m.anchors.length;while(e--){if(m.anchors[e].level>=a){m.anchors.splice(e,1)}}e=m.cycleDivs.length;while(e--){if(m.cycleDivs[e].level>=a){m.cycleDivs.splice(e,1)}}if(m.isChild){fb.children.length--}fb.lastChild=fb.children[fb.children.length-1]||fb;var h=function(){setTimeout(function(){while(m.nodes.length){var i=m.nodes.pop();if(i&&i.parentNode){i.parentNode.removeChild(i);delete m[i.id]}}if(m.cycleDivs.length){m.cycleGo()}m.exec(l,"onItemEnd");m.exec(l,"afterItemEnd");m.exec(l,"afterBoxEnd");if(m.isChild){if(m.endAll){return fb.end(true)}}else{var o=m.loadPageOnClose;if(o===m.undefined){o=m.clickOptions.loadPageOnClose||m.pageOptions.loadPageOnClose}if(o){if(o==="self"||o==="this"){location.reload(true)}else{if(o==="back"){history.back()}else{location.href=o}}}}},10)};var d=function(){while(m.hiddenEls.length){var o=m.hiddenEls.pop();o.style.visibility="visible";if(m.ffOld&&m.ffMac){o.focus();o.blur()}}if(m.fbOverlay){var i=m.fbOverlay.style;i.display="none";i.width=i.height="0";var p=l.popup?5:0;if(m.fbZoomDiv){m.fbZoomDiv.style.opacity="1";m.setOpacity(m.fbZoomDiv,0,p,h)}else{h()}}m.currentItem=m.previousItem=m.itemToShow=m.indexToShow=false};m.setOpacity(m.fbOverlay,0,m.overlayFadeDuration,d)};Floatbox.prototype.exec=function(item,funcName){var t=this,rtn=null;function run(func){if(!func){return}try{if(typeof func==="function"){return func()}else{if(typeof func==="string"){return eval(func)}}}catch(e){}}if(run(t[funcName])===false){rtn=false}if(run(t.pageOptions[funcName])===false){rtn=false}if(item&&item.options&&run(item.options[funcName])===false){rtn=false}return rtn};Floatbox.prototype.pause=function(b){var a=this;a.isPaused=b;if(b){a.clearTimeout("slideshow")}else{a.showItem(a.nextIndex)}if(a.showPlayPause){a.fbPlay.style.top=b?"":"-9999px";a.fbPause.style.top=b?"-9999px":""}};Floatbox.prototype.getDisplaySize=function(){var a=this;return{width:a.getDisplayWidth(),height:a.getDisplayHeight()}};Floatbox.prototype.getDisplayWidth=function(){var a=this;return a.docEl.clientWidth||a.bod.clientWidth};Floatbox.prototype.getDisplayHeight=function(){var a=this;return(!a.docEl.clientHeight||a.operaOld||document.compatMode==="BackCompat")?a.bod.clientHeight:a.docEl.clientHeight};Floatbox.prototype.getScroll=function(f){var c=this;if(!(f&&f.document)){f=self}var e=f.document,b=e.documentElement,a=e.getElementsByTagName("body")[0],d=f.pageXOffset||a.scrollLeft||e.documentElement.scrollLeft||0;if(c.ie&&c.rtl){d-=b.scrollWidth-b.clientWidth}return{left:d,top:f.pageYOffset||a.scrollTop||e.documentElement.scrollTop||0}};Floatbox.prototype.setTimeout=function(c,d,a){var b=this;if(a){b.timeouts[c]=setTimeout(d,a)}else{return d()}};Floatbox.prototype.clearTimeout=function(b){var a=this;if(a.timeouts[b]){clearTimeout(a.timeouts[b]);delete a.timeouts[b]}else{if(b==="*"){for(var c in a.timeouts){if(a.timeouts.hasOwnProperty(c)){a.clearTimeout(c)}}}}};Floatbox.prototype.isXSite=function(a){if(a&&a.indexOf("//")===0){a=location.protocol+a}return/https?:\/\/\w/i.test(a)&&a.toLowerCase().indexOf(fb.base)!==0};Floatbox.prototype.getXMLHttpRequest=function(){var xhr;if(window.XMLHttpRequest){if(!(xhr=new XMLHttpRequest())){return false}}else{try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(ee){return false}}}return{getResponse:function(params){if(!params){return}if(!params.url){params.url=params.href}if(!params.url){return}var getResp=arguments.callee;if(!getResp.pending){getResp.pending=[]}if(!(!xhr.readyState||xhr.readyState===4)){getResp.pending.push(params);return}try{xhr.open(params.postData?"POST":"GET",params.url,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");if(!params.cache){xhr.setRequestHeader("Cache-Control","no-cache");xhr.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT");xhr.setRequestHeader("Expires","Thu, 1 Jan 1970 00:00:00 GMT");xhr.setRequestHeader("Pragma","no-cache")}if(params.postData){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.setRequestHeader("Content-Length",params.postData.length)}if(fb.typeOf(params.headers)==="object"){for(var prop in params.headers){if(params.headers.hasOwnProperty(prop)){xhr.setRequestHeader(prop,params.headers[prop])}}}xhr.onreadystatechange=function(){if(xhr.readyState===4){xhr.onreadystatechange=function(){};if(params.updateNode){fb.setInnerHTML(params.updateNode,xhr.responseText)}if(typeof params.callback==="function"){params.callback(xhr)}if(typeof params.callback==="string"){try{eval(params.callback)}catch(e){}}}if(getResp.pending.length){getResp(getResp.pending.pop())}};xhr.send(params.postData||null)}catch(e){}}}};Floatbox.prototype.moveInnerHTML=function(c,b){var a=this;if(c&&b&&a.setInnerHTML(b,c.innerHTML)){a.setInnerHTML(c,"")}};eval(function(p,a,c,k,e,r){e=function(c){return(c<62?'':e(parseInt(c/62)))+((c=c%62)>35?String.fromCharCode(c+29):c.toString(36))};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'[78rt-yA-X]'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('G.H.t=x(o){7 m=x(d){8(!d)v\'\';7 h=d.y,k=h-A.I((h-2)/4)-2,e=[],b=h;B(b--){7 c=d.charCodeAt(b);8(c>96)c-=6;8(c>63)c-=5;e[b]=c-J}7 p=e[h-1],b=h-1;B(b--)e[b]=e[b]^p;7 n=\'\';K(7 b=0,f=0;b<k;b++){switch(b%3){C 0:c=e[f]<<2;f++;c=c|((e[f]&J)>>4);w;C 1:c=(e[f]&15)<<4;f++;c=c|((e[f]&60)>>2);w;C 2:c=(e[f]&3)<<6;f++;c=c|e[f];f++;w}n+=String.fromCharCode(c)}v n};8(o!==D&&A.I(A.random()*25))v\'\';7 i=L,l=\'u\',a=arguments.callee;8(a.h===i.undefined){a.d=/https?:\\/\\/.*[a-E-9\\-]{2,}\\.[a-z]{2,}/.F(i.M);a.l=m(((i[l]||i.N[l]||i.O[l])||\'\').replace(/\\s/g,\'\'));a.r=a.l.y;8(!/[a-E-9\\-]{2,}\\.[a-z]{2,}/i.F(a.l)&&!(a.r>4&&!(a.r%4)&&/^[a-E-9\\-]+$/i.F(a.l))){a.l=\'\';a.r=0}a.h=false;8(a.r){8(a.l.P(\'.\')!==-1){7 j=[a.l]}Q{7 j=[];K(7 g=0,q=0;g<a.r;g+=4){j[q++]=a.l.R(g,g+2)+\'.\'+a.l.R(g+2,g+4)}}7 g=j.y;B(g--){8(i.M.P(j[g])>6){a.h=D;w}}}}v(!a.l||(a.d&&!a.h))?m(\'pwfHbMv9bxTKXdCMaw79UhfHVA20Wgn9VA@Dbwi1mxbHXxfGoNy:qsi1mwPTUgbGbtG@qtuTo8vMWgrFXBnJbg3SlgrJVw78oMrQXQi1mwrJVw78oQnKWgrFo8m4pxuOaBf3Vwi7mQDPaQbHVNG@qxv2o8vQVA3ClhrHYQi0qdr:YtKMpN@MpTnTVgTIXwj8oN:JWN26WRmOl93wVw7PbwnJYsvHa8vNVBv3aQTRUxfTXsv9VAXCbAz8XcvPVQeOaQj@bgT8XhqOaQjRUhrCaQzCUg7ImwXJaMvKXgbPVsvDaAiIpwn8ms64iw@TWhrTmxXHaATCmt@PmwP8XgW7mQPCbxu0l878Wg3SVADJbhqIWA7LlAXKVAzCWQ72lBnTXAT9bwj8mMvCWhnRXhe7mT7MVwzIU8m4UxfCatGJlBnPVQfJVg7Da83NVACJXQ@JWhfMVBOJaQjRUhrCXhm6lAy4mxfJmxvDaQrGWhrTmwyOWA7LVgj8WATPVsv9UhfTmw@HWAjIaAiOVBmObw6OaQj@bgj9bsvPmwX8XgiOVwTNXg39XcvFXhSOXQ78mxTJbhmOawj8aA7IWg:OUw7MWRSOaATCXc2OjwPTmw@HWAjIaAiOUAj3mxnTVg7AXhqObwPHa8vIWgaOVgj9aAzRXc26lBu4ps7SUhW4u\'):\'\'};G.H.S=x(){7 d=L,h=d.N.u,k=d.O.u,e=!!(d.u),b=\'T U - \'+d.U+\'\\n\\nlicense S installed - \'+e;8(e){d.t(D);b+=\'\\n\\ninstall V - \'+(h?\'fbPageOptions\':(k?\'T.W options\':d.X+\'u.W\'));b+=\'\\n\\nwell formed - \'+!!d.t.l;b+=\'\\n\\nmatches domain - \'+(d.t.d?d.t.h:\'offline\')}Q{b+=\'\\n\\nfloatbox install V - \'+d.X}alert(b)};',[],60,'|||||||var|if|||||||||||||||||||ll||reg|licenseKey|return|break|function|length||Math|while|case|true|z0|test|Floatbox|prototype|floor|48|for|fb|base|pageOptions|defaultOptions|indexOf|else|substring|key|floatbox|version|location|js|installFolder'.split('|'),0,{}));Floatbox.prototype.preload=function(e,h,j){var g=fb;if(g.preload.count===g.undefined){g.preload.count=0}if(h!==g.undefined){g.preload.chain=h}if(!e&&g.preload.chain&&(g.preloadAll||!g.preload.count)){for(var f=0,b=g.anchors.length;f<b;f++){var c=g.anchors[f];if(c.type==="img"&&!g.preloads[c.href]){e=c.href;break}}}if(e){if(g.preloads[e]){fb.preload()}else{var d=new Image();d.onload=function(){g.preloads[e]=d;g.preload.count++;setTimeout(function(){fb.preload()},200);if(typeof j==="function"){j()}};d.onerror=function(){if(this.src===g.notFoundImg){this.onload()}else{this.src=g.notFoundImg}};d.src=e}}};Floatbox.prototype.setSize=function(g){var o=this,f=false,k=[[],[]],a={},e,j=arguments.length;if(g==="wh"){a.top=1;a.height=1}else{if(g==="hw"){a.left=1;a.width=1}}while(j--){var h=arguments[j];if(o.typeOf(h)==="object"&&h.hasOwnProperty("id")){var e=o[h.id];if(!o.pos[h.id]){o.pos[h.id]={}}for(var b in h){if(h.hasOwnProperty(b)&&b!=="id"){var l=e,d=h[b],n=0;if(!/IMG|IFRAME/.test(e.nodeName)||(b!=="width"&&b!=="height")){l=e.style;n="px"}var m=a[b]||0,c=o.pos[h.id][b];if(typeof c!=="number"||e.style.display||e.style.visibility){c=d}k[m].push({target:l,prop:b,start:c,finish:d,px:n});if(/width|height/i.test(b)){if(h.id==="fbMainDiv"){k[m].push({target:o.fbContent,prop:b,start:c,finish:d,px:0})}else{if(h.id==="fbZoomDiv"){k[m].push({target:o.fbZoomImg,prop:b,start:c,finish:d,px:0})}}}o.pos[h.id][b]=d}}}else{if(typeof arguments[j]==="function"){f=arguments[j]}}}o.resizeGroup(k[0],function(){o.resizeGroup(k[1],f)})};Floatbox.prototype.resizeGroup=function(a,g){var c=this,b=a.length;if(!b){return g?g():null}c.clearTimeout("resize");var f=0;while(b--){f=Math.max(f,Math.abs(a[b].finish-a[b].start))}var e=c.resizeDuration*(c.liveResize?0.65:1);var d=f&&e?Math.pow(Math.max(1,2.2-e/10),(Math.log(f)))/f:1;d*=c.speedBoost;b=a.length;while(b--){a[b].diff=a[b].finish-a[b].start}c.stepResize(0,d,a,g)};Floatbox.prototype.stepResize=function(h,f,d,g){var j=this;if(h>1){h=1}var c=d.length;while(c--){var e=d[c].target,a=d[c].prop,b=Math.round(d[c].start+d[c].diff*h);if(!e){h=1;break}e[a]=b+d[c].px}if(h>=1){delete j.timeouts.resize;if(g){g()}}else{j.timeouts.resize=setTimeout(function(){j.stepResize(h+f,f,d,g)},30)}};Floatbox.prototype.setOpacity=function(c,g,d,j,e){var l=this;if(!(c=fb$(c))){return}d=d||0;var i=+(c.style.opacity||0),k=g/100;l.clearTimeout["fade_"+c.id];var f=(i<=k&&k>0);if(d>10){d=10}if(d<0){d=0}if(d===0){i=k;var b=1}else{var h=Math.pow(100,0.1),a=d+((10-d)/9)*(Math.log(2)/Math.log(h)-1),b=1/Math.pow(h,a)}if(f){if(l.ie){c.style.filter="alpha(opacity="+i*100+")"}c.style.opacity=i+"";c.style.display=c.style.visibility=""}else{b=-b}b*=l.speedBoost;l.stepFade(c,i+b,k,b,f,j,e,(i+k)/2)};Floatbox.prototype.stepFade=function(c,g,d,a,f,h,e,b){var i=this;if(!c){return}if((f&&g>=d)||(!f&&g<=d)){g=d}if(i.ie){c.style.filter="alpha(opacity="+g*100+")"}c.style.opacity=g+"";if(e){if((f&&g>=b)||(!f&&this<=b)){e();e=null}}if(g===d){delete i.timeouts["fade_"+c.id];if(c.style.removeAttribute&&d>=1){c.style.removeAttribute("filter")}if(h){h()}}else{i.setTimeout("fade_"+c.id,function(){i.stepFade(c,g+a,d,a,f,h,e,b)},20)}};Floatbox.prototype.getLeftTop=function(d){if(!(d&&d.nodeName)){return{left:0,top:0}}var r=this,F=d.ownerDocument,E=F.getElementsByTagName("body")[0],h=F.documentElement,m=F.defaultView||F.parentWindow,b=r.getScroll(m),n=r.getStyle(d,"position").toLowerCase(),g=n==="fixed";if(d.nodeName==="HTML"){var j=0,u=0}else{if(d.getBoundingClientRect){var c=d.getBoundingClientRect(),j=c.left+(g?0:b.left),u=c.top+(g?0:b.top);if(r.ie){j-=h.clientLeft||E.clientLeft;u-=h.clientTop||E.clientTop}}else{var j=d.offsetLeft||0,u=d.offsetTop||0,q=!(g||n==="absolute"),D=q&&n!=="relative",z=d,f=true,l=true,y=g;if(g){j+=b.left;u+=b.top}while(!y&&(z=z.offsetParent)){var e=0,s=0,w=l,x=r.getStyle(z,"position").toLowerCase(),y=x==="fixed",l=!(y||x==="absolute"),A=l&&x!=="relative",a=z===d.offsetParent;if(!r.opera){if((r.ff||z!==E)&&r.getStyle(z,"-moz-box-sizing")!=="border-box"){e=parseInt(r.getStyle(z,"border-left-width"),10)||0;s=parseInt(r.getStyle(z,"border-top-width"),10)||0}if(r.ff){if((!q&&(A!==a))||(q&&A)){if(((w&&q)||!l)||(l&&!q&&w)){if(!(z.nodeName==="TD"||(!A&&r.getStyle(z,"overflow")==="visible"))){j+=e;u+=s}}}}}j+=z.offsetLeft+e;u+=z.offsetTop+s;if(y){j+=b.left;u+=b.top}if(!l){f=false}}var z=d,x="";while(x!=="absolute"&&x!=="fixed"&&(z=z.parentNode)&&z.nodeType===1){if(z!==E&&z!==h){j-=z.scrollLeft||0;u-=z.scrollTop||0}x=r.getStyle(z,"position")}if(!r.opera&&f&&d.offsetParent!==E&&!(r.webkit&&g)){j+=parseInt(r.getStyle(h,"margin-left"),10);u+=parseInt(r.getStyle(h,"margin-top"),10)}if(r.ffOld){j-=parseInt(r.getStyle(h,"border-left-width"),10);u-=parseInt(r.getStyle(h,"border-top-width"),10)}}}if(m!==self){var k=m.parent.document.getElementsByTagName("iframe"),C=k.length;while(C--){var z=k[C],v=r.getIframeDocument(z);if(v===F){var o=r.getLeftTop(z);j+=o.left-b.left;u+=o.top-b.top;if(r.ie||r.opera){var B=0,p=0;if(!(r.ie&&D)){B=parseInt(r.getStyle(z,"padding-left"),10);p=parseInt(r.getStyle(z,"padding-top"),10)}j+=z.clientLeft+B;u+=z.clientTop+p}else{j+=parseInt(r.getStyle(z,"border-left-width"),10)+parseInt(r.getStyle(z,"padding-left"),10);u+=parseInt(r.getStyle(z,"border-top-width"),10)+parseInt(r.getStyle(z,"padding-top"),10)}break}}}return{left:j,top:u}};Floatbox.prototype.ajax=function(a){fb.xhr.getResponse(a)};Floatbox.prototype.loadAnchor=function(b,a,d){var c=fb.lastChild;if(b){if(b.getAttribute){c.start(b)}else{c.start({href:b,rev:a,title:d})}}};Floatbox.prototype.goBack=function(){var c=fb.lastChild,b=c.previousItem;if(b){c.start({href:b.href,rev:b.rev+" sameBox:true",title:b.title})}};Floatbox.prototype.resize=function(c,a){var b=fb.lastChild,d=b.currentItem||false,e=false;c=c&&parseInt(c,10);a=a&&parseInt(a,10);if(c&&d&&d.nativeWidth!==c){d.nativeWidth=c;e=true}if(a&&d&&d.nativeHeight!==a){d.nativeHeight=a;e=true}if(e){b.collapse(function(){b.calcSize(false)})}};Floatbox.prototype.getIframeDocument=function(b){var a=fb.lastChild;if(!b&&a.currentItem&&a.currentItem.type==="iframe"){b=a.fbContent}if(b&&b.getAttribute){try{return b.contentDocument||(b.contentWindow&&b.contentWindow.document)}catch(c){}}return false};Floatbox.prototype.getIframeWindow=function(b){var a=fb.lastChild;if(!b&&a.currentItem&&a.currentItem.type==="iframe"){b=a.fbContent}if(b&&b.getAttribute){try{return b.contentWindow||(b.contentDocument&&b.contentDocument.defaultView)}catch(c){}}return false};(function(){var t=fb;t.xhr=t.getXMLHttpRequest();t.strings={hintClose:"Exit (key: Esc)",hintPrev:"Previous (key: <--)",hintNext:"Next (key: -->)",hintPlay:"Play (key: spacebar)",hintPause:"Pause (key: spacebar)",hintResize:"Resize (key: Tab)",imgCount:"Image %1 of %2",nonImgCount:"Page %1 of %2",mixedCount:"(%1 of %2)",infoText:"Info...",printText:"Print...",flashVer:"A newer version of Flash Player is required to view this content.",needPlayer:"%1 is required to view this content.",newWindow:"Open in a new window"};var lang=t.language==="auto"?t.browserLanguage:t.language;fb.ajax({url:t.languagesFolder+lang+".json",cache:true,callback:function(xhr){if(xhr.responseText){var ltArrow=String.fromCharCode(8592),rtArrow=String.fromCharCode(8594),text=xhr.responseText;if(t.ieXP){text=text.replace(ltArrow,"<--").replace(rtArrow,"-->")}try{var obj=eval("("+text+")");if(obj&&obj.hintClose){t.strings=obj}}catch(e){}}if(t.rtl){if(!/^(ar|he)$/.test(t.language)){t.strings.infoText=t.strings.infoText.replace("...","");t.strings.printText=t.strings.printText.replace("...","")}t.strings.hintPrev=t.strings.hintPrev.replace(ltArrow,rtArrow).replace("-->","<--");t.strings.hintNext=t.strings.hintNext.replace(rtArrow,ltArrow).replace("<--","-->");var swap=t.strings.hintPrev;t.strings.hintPrev=t.strings.hintNext;t.strings.hintNext=swap}}});t.exec(null,"afterFBLoaded")})();